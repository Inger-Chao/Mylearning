## 介质访问控制子层

任务：为使用介质的每个结点***隔离来自同一信道上其他结点所传送的信号***。

#### 信道划分（静态划分）

- 频分复用：将多种基带信号调制到不同频率载波上再进行叠加形成一个复合信号
- 时分复用：将一条信道分成若干时间片，轮流分配给多个信号使用
  - STDM 异步时分复用：动态分配时隙的时分复用
  - 4个用户使用线路传输速率为 8000b/s 的通信线路，TDM 每个用户最多2000b/s，STDM可以达到8000b/s
- 波分复用：光的频分多路复用。根据光的波长不同划分。
- 码分复用：靠不同的编码区分各路原始信号。
  - 比如说A、B、C三个站共享一个信道，A站发送的码片向量为 S，C 站想接受来自 A 站的数据，就把**结果的码片向量和 A 的码片向量做内积再除以码片向量的长度**，即可得到 A 发来的数据。

#### 随机访问（动态分配、争用型）

常用：ALOHA协议、CSMA协议、**CSMA/CD**协议、CSMA/CA协议。

- ALOHA ： 共享同一信道上的所有主机随时都可以发送数据，如果在一段时间没收到确认则认为发生了冲突。等待一段时间后再次发送数据直到发送成功。
- CSMA：监听信道，信道空闲才可发送
  - 1-坚持型：信道忙则持续监听信道
  - 非坚持型：信道忙则放弃监听，等待下一个随机时间再监听
  - p-坚持型：信道空闲以 p 概率发送数据，若信道忙采用非坚持的策略
- **CSMA/CD**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
  - ***载波监听*** ：适配器从父节点获得一个网络层数据报，准备一个以太网帧并把该帧放到适配器缓冲器中。如果信道空闲开始传输，否则暂时不要发送。
  - ***碰撞检测*** ：传送过程中，适配器会一直检测来自其他适配器的信号能量是否出现。
  - ***冲突停发***：传输过程中如果检测到其他适配器的信号，停止传输并传输一个48bit的拥塞信号。
  - ***随机重发***：发送拥塞信号之后，采用截断**二进制指数退避算法**等待一段时间后回到终止前的状态继续发送。

![CSMA/CD流程图](./../assets\CSMA-CD流程图.png)

- CSMA/CA(碰撞避免)：应用于无线局域网中

> 注：CSMA/CD中为了确保 **发送数据的同时能检测到可能存在的冲突**，需要在发送完帧之前就能收到自己发出去的数据。***最小帧长 = 总线传播时延 * 数据传输速率 * 2 ***
>
> 二进制指数退避算法（基本退避时间取争用期2τ）：k = min{重传次数，10}，从整数集合{0,1,2,3 …… 2^k-1}随机取出一个数 r，等待r倍的基本退避时间后重新发送。重传16次仍无法成功传输报告给高层。

#### 轮询访问（动态分配、集中控制）

通过一个集中控制的监控站，以循环的方式轮询每个结点再决定信号的分配。令牌在各节点中以某个固定次序交换，它是一组特殊的比特组合而成的帧。只有拿到令牌的计算机才能发送数据帧，所以不会冲突。

#### 错题

1. 从表面上看，FDM比TDM能更好地利用信道的传输能力，但现在的计算机网络更多地使用TDM而不是FDM，其原因是 **TDM可用于数字传输而FDM不行**。`FDM：模拟信号，TDM：数字信号`

